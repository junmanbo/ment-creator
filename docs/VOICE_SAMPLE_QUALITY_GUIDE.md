# 음성 샘플 품질 개선 가이드

## 개요

Voice Cloning의 품질은 입력 음성 샘플의 품질에 크게 좌우됩니다. 이 가이드는 최적의 Voice Cloning 결과를 얻기 위한 음성 샘플 준비 및 전처리 방법을 설명합니다.

## 이상적인 음성 샘플의 특징

### 1. 기술적 사양
- **샘플레이트**: 22050Hz (Coqui TTS 권장)
- **비트 깊이**: 16bit PCM
- **채널**: 모노
- **파일 형식**: WAV (무손실)

### 2. 음향 특성
- **길이**: 3-30초 (10-20초가 이상적)
- **볼륨**: -23 LUFS (방송 표준)
- **신호 대 잡음비(SNR)**: 40dB 이상
- **배경 잡음**: 최소화

### 3. 음성 특성
- **발음**: 명확하고 일관된 발음
- **속도**: 자연스러운 속도
- **감정**: 중립적이거나 목표 감정
- **침묵**: 시작과 끝의 과도한 침묵 제거

## 자동 전처리 기능

### 1. 노이즈 제거
```python
# 정적 노이즈 제거
# 강도: 0.7 (0.0-1.0)
# 클릭 노이즈 제거: median filter 적용
```

### 2. 볼륨 정규화
```python
# LUFS 기준 정규화
# 목표: -23 LUFS (방송 표준)
# 피크 리미팅: -0.3dB
```

### 3. 침묵 구간 제거
```python
# 임계값: -40dB
# 최소 간격: 0.1초
# 시작/끝 자동 트리밍
```

### 4. 주파수 필터링
```python
# 하이패스: 80Hz (저주파 럼블 제거)
# 로우패스: 8000Hz (불필요한 고주파 제거)
# 필터 차수: 4차 Butterworth
```

### 5. 다이나믹 레인지 압축
```python
# 압축비: 0.8
# 임계값: 상위 30%
# 부드러운 게인 적용
```

### 6. 음성 명료도 향상
```python
# 포먼트 강조: 2-4kHz
# 하모닉 향상: 1.1x
# 원본 블렌딩: 70%
```

## API 사용법

### 1. 단일 파일 전처리
```bash
POST /api/v1/voice-actors/audio/preprocess

Form Data:
- audio_file: 음성 파일
- apply_noise_reduction: true
- apply_normalization: true
- apply_silence_trim: true
- apply_voice_enhancement: true
```

### 2. 음성 분석만 수행
```bash
POST /api/v1/voice-actors/audio/analyze

Form Data:
- audio_file: 음성 파일
```

### 3. 성우별 일괄 전처리
```bash
POST /api/v1/voice-actors/audio/batch-preprocess

Form Data:
- voice_actor_id: UUID
- process_all_samples: true/false
```

## 품질 점수 시스템

### 점수 구성 (0-100점)
1. **볼륨 적절성 (20%)**
   - 목표 LUFS와의 차이
   - -23 LUFS에 가까울수록 높은 점수

2. **신호 대 잡음비 (50%)**
   - SNR이 높을수록 좋음
   - 40dB 이상 권장

3. **길이 적절성 (20%)**
   - 3-30초 구간에서 100점
   - 10-20초가 가장 이상적

4. **기타 요소 (10%)**
   - 클리핑 여부
   - 피크 레벨
   - 침묵 비율

### 품질 등급
- **90점 이상**: 우수 (Voice Cloning에 최적)
- **70-89점**: 양호 (사용 가능)
- **50-69점**: 보통 (개선 필요)
- **50점 미만**: 불량 (재녹음 권장)

## 수동 준비 가이드

### 1. 녹음 환경
- **조용한 공간**: 에어컨, 선풍기 끄기
- **흡음재**: 벽 반사음 최소화
- **마이크 거리**: 15-30cm
- **팝필터**: 파열음 방지

### 2. 녹음 설정
- **포맷**: WAV (무손실)
- **샘플레이트**: 44100Hz 이상
- **비트 깊이**: 16bit 이상
- **입력 레벨**: -12 ~ -6dB

### 3. 발성 가이드
- **일관성**: 동일한 톤과 속도 유지
- **자연스러움**: 대본을 읽는 듯한 느낌 지양
- **호흡**: 문장 사이 자연스러운 호흡
- **감정**: 목표 서비스에 맞는 감정

### 4. 녹음 내용
- **다양성**: 다양한 음소 포함
- **길이**: 각 3-5초씩 여러 개
- **내용**: 실제 사용할 문장 유형

## 문제 해결

### 1. "볼륨이 너무 낮습니다"
- 녹음 레벨 확인
- 마이크 거리 조정
- 프리앰프 게인 조정

### 2. "클리핑이 감지되었습니다"
- 입력 레벨 낮추기
- 리미터 사용
- 다시 녹음

### 3. "침묵 구간이 많습니다"
- 수동으로 편집
- 자동 트리밍 적용
- 컴팩트한 녹음

### 4. "품질 점수가 낮습니다"
- 전처리 옵션 모두 적용
- 재녹음 고려
- 전문가 도움 요청

## 모범 사례

### 1. 일관성 유지
- 동일한 녹음 환경
- 동일한 시간대 녹음
- 동일한 컨디션

### 2. 품질 우선
- 양보다 질
- 여러 번 테스트
- 피드백 반영

### 3. 정기적 업데이트
- 시즌별 재녹음
- 피드백 기반 개선
- 새로운 문장 추가

## 기술 지원

문제가 지속되거나 추가 도움이 필요한 경우:
- 시스템 관리자 문의
- 음향 전문가 상담
- 기술 지원팀 연락

---

이 가이드를 통해 최상의 Voice Cloning 결과를 얻으시길 바랍니다!